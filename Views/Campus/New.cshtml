<div id="app" class="container">
    <form v-on:submit.prevent="save">
        <div class="form-group">
            <label class="form-label">Name</label>
            <input type="text" class="form-control" v-model="campus.name">
        </div>
        <div class="form-group">
            <label class="form-label">Address</label>
            <input type="text" class="form-control" v-model="campus.address">
        </div>
        <button type="submit">Add</button>
    </form>

    <div class="container">
        <div class="form-group">
            <label for="">Product</label>
            <label for="" class="form-control">Rum Pum</label>
        </div>
        <div class="form-group">
            <label class="form-label">Qty</label>
            <input type="text" class="form-control" v-model="qty">
        </div>
        <div class="form-group">
            <label class="form-label">Rate</label>
            <input type="text" class="form-control" v-model="rate">
        </div>
        <div class="form-group">
                    <label class="form-label">Amount</label>
                    <label for="" class="form-control">{{amount}}</label>
                </div>
    </div>
</div>

@section Scripts
{
    <script>
        $(() => {
            const app = Vue.createApp({
                setup(){
                    const campus = Vue.ref({name: null, address : null});
                    const rate = Vue.ref(0);
                    const qty = Vue.ref(0);
                    
                    Vue.watch(() => campus.value, () => {
                        alert("updated");    
                    }, {deep : true});
                    
                    Vue.watch(() => rate, () => {
                        
                    });
                    
                    const amount = Vue.computed(() => {
                        return rate.value * qty.value;
                    })
                    
                    const save = async () => {
                        try {
                          let model = campus.value;
                          const res = await $.ajax('/Campus/New', {
                              data : {model},
                              method : "post"
                          });
                          location.replace("/Campus/Index");
                        }
                        catch (e){
                            console.log(e);    
                            alert("Error occured, Check console for more info");
                        }
                    }
                    return {
                        campus,
                        save  ,
                        rate, 
                        qty,
                        amount
                    }
                }
            });
            app.mount("#app");
        })
    </script>
}